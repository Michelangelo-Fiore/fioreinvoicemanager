(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3095:(e,t,n)=>{Promise.resolve().then(n.bind(n,7041))},4681:(e,t,n)=>{"use strict";n.d(t,{EV:()=>a,oY:()=>l,r2:()=>c,tj:()=>i});var r=n(3464),s=n(7383);let o="https://fioreinvoicemanager.onrender.com",a="https://fioreinvoicemanager.onrender.com",i="".concat(o,"/api"),c=r.A.create({baseURL:o,headers:{"Content-Type":"application/json"},withCredentials:!0});c.interceptors.request.use(async e=>(e.baseURL="".concat(i),e),e=>Promise.reject(e)),c.interceptors.response.use(e=>e,e=>{var t,n;let s=e.config;return(null==(t=navigator)?void 0:t.onLine)!==!1&&((null==e||null==(n=e.response)?void 0:n.status)!==401||(null==s?void 0:s._retry))?Promise.reject(e):(s._retry=!0,r.A.defaults.headers.common["Content-Type"]="application/json",(0,r.A)(s))});let l=r.A.create({baseURL:"".concat(i),withCredentials:!0,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(async e=>(e.headers["Content-Type"]="application/json",e.baseURL="".concat(i),e),e=>Promise.reject(e)),l.interceptors.response.use(e=>e,async e=>{var t,n,o,a;console.log(e);let c=e.config;if(c._retry||(null==(t=navigator)?void 0:t.onLine)===!1)return Promise.reject(e);if(498===(null==e||null==(o=e.response)||null==(n=o.data)?void 0:n.code)){c._retry=!0;try{let e=null==(a=(await r.A.post("".concat(i,"/auth/refresh-token"),{},{withCredentials:!0})).data)?void 0:a.accessToken;if(e)return s.A.set("accessToken",e),l.defaults.headers.common.Authorization="Bearer ".concat(e),c.headers.Authorization="Bearer ".concat(e),l(c)}catch(e){return Promise.reject(e)}}return Promise.reject(e)});let d=r.A.create({baseURL:"".concat(i),withCredentials:!0});d.interceptors.request.use(async e=>{let t=s.A.get("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e.baseURL="".concat(i),e},e=>Promise.reject(e)),d.interceptors.response.use(e=>e,e=>{let t=e.config;return!1!==navigator.onLine&&(401!==e.response.status||t._retry)?Promise.reject(e):(t._retry=!0,r.A.defaults.headers.common["Content-Type"]="application/json",(0,r.A)(t))})},7041:(e,t,n)=>{"use strict";n.d(t,{default:()=>h});var r=n(5155),s=n(2115),o=n(5695),a=n(4681);let i={dashboard:"/dashboard"};[...Object.values(i)];let c=async(e,t)=>{try{console.log("Login Started");let n=window.open("".concat(a.tj,"/fatture/auth"),"_blank");if(!n)throw Error("Unable to open authentication window.");let r=n=>{var s,o;console.log("event.origin ==>",n.origin),console.log("event.data ==>",n.data),n.origin===a.EV&&((null==(s=n.data)?void 0:s.status)==="success"?(console.log("Login Success:",n.data),e.push(i.dashboard),window.removeEventListener("message",r)):(null==(o=n.data)?void 0:o.status)==="error"&&(console.error("Login Failed:",n.data.message),t(n.data.message||"Login failed"),window.removeEventListener("message",r)))};window.addEventListener("message",r);let s=setInterval(()=>{n.closed&&(clearInterval(s),window.removeEventListener("message",r))},500)}catch(e){console.error("Login Failed:",(null==e?void 0:e.message)||e),t((null==e?void 0:e.message)||"Login failed")}};var l=n(7132),d=n(2900);let u=e=>{let{whileHover:t,whileTap:n,type:s,title:o,disabled:a,onClick:i,className:c,text:l,children:u,loading:m}=e;return(0,r.jsx)(d.P.button,{whileHover:t,whileTap:n,type:s||"button",title:o,disabled:a||m,onClick:i,className:"".concat(c," cursor-pointer rounded-3xl flex items-center justify-center"),children:m?(0,r.jsx)("div",{className:"loader"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"font-Lora",children:l}),u]})})},m=()=>{let e=(0,o.useRouter)(),[t,n]=(0,s.useState)("");return(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"".concat(l.jT," "),children:(0,r.jsx)("div",{className:"text-black text-center font-LibreFranklin flex justify-center items-center h-screen w-full",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"font-semibold font-LibreFranklin text-5xl",children:"Fiore Invoice Manager \uD83D\uDCCA"})}),(0,r.jsx)("div",{className:"mt-[10px]",children:(0,r.jsx)("p",{className:"font-medium font-LibreFranklin text-[16px]",children:"Don't have an account? Sign Up"})}),(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center w-full",children:[(0,r.jsx)(u,{whileHover:{scale:1.1,transition:{duration:.3,ease:"easeInOut"}},whileTap:{scale:.95},type:"button",onClick:()=>c(e,n),className:"bg-green-600 px-[30px] py-[10px] mt-[100px] text-[20px] font-semibold text-white",children:"Log Into FattureInCloud"}),t&&(0,r.jsx)("p",{className:"mt-4 text-red-600 font-medium",children:t})]})]})})})})},h=()=>((0,s.useEffect)(()=>{let e=new AbortController;return document.title="Fiore Invoice Manager \uD83D\uDCCA",function(){e.abort()}},[]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("section",{children:(0,r.jsx)(m,{})})}))},7132:(e,t,n)=>{"use strict";n.d(t,{jT:()=>r});let r="hidden min-[1024.501px]:block"}},e=>{e.O(0,[122,702,441,964,358],()=>e(e.s=3095)),_N_E=e.O()}]);