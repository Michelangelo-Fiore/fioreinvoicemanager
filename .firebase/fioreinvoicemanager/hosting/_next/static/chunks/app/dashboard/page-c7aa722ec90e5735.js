(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{1446:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(5155),r=s(2115),n=s(4681);let l={getClients:async function(e){return n.oY.get("/dashboard/clients",{signal:null==e?void 0:e.signal})},getProducts:async function(e){return n.oY.get("/dashboard/products",{signal:null==e?void 0:e.signal})},getReceipts:async function(e){return n.oY.get("/dashboard/receipts",{signal:null==e?void 0:e.signal})}},i=async(e,t,s,a,r)=>{var n,i;try{let i;if(a(!0),s(null),(i="clients"===e?await l.getClients({signal:r}):"products"===e?await l.getProducts({signal:r}):await l.getReceipts({signal:r}))&&200===i.status){console.log("".concat(e," Details ==>"),i.data);let s=Array.isArray(i.data)?i.data:(null==(n=i.data)?void 0:n.data)||i.data||[];t(s)}else t([]),s("Failed to fetch resource")}catch(e){if(console.error("Get Resource Details Failed:",(null==e||null==(i=e.response)?void 0:i.data)||e.message),(null==e?void 0:e.name)==="CanceledError"||(null==e?void 0:e.message)==="canceled")return;s((null==e?void 0:e.message)||"Failed to fetch resource details")}finally{a(!1)}};var c=s(7132);let o=()=>{let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0),[l,o]=(0,r.useState)(null),[d,u]=(0,r.useState)("clients"),[h,p]=(0,r.useState)(""),[m,x]=(0,r.useState)(""),[g,v]=(0,r.useState)(1),[j,f]=(0,r.useState)(10);(0,r.useEffect)(()=>{let e=new AbortController;return i(d,t,o,n,e.signal).catch(e=>{console.error("handleFetchResource Error:",e)}),()=>e.abort()},[d]),(0,r.useEffect)(()=>{v(1)},[e,j]);let y=e&&e.length>0?Object.keys(e[0]):[];(0,r.useEffect)(()=>{y.length>0&&!h&&p(y[0])},[y]);let b=e.filter(e=>{if(!h||!m)return!0;let t=e[h];return null!=t&&String(t).toLowerCase().includes(m.toLowerCase())}),N=b.length,w=Math.max(1,Math.ceil(N/j)),C=b.slice((g-1)*j,(g-1)*j+j);return(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"".concat(c.jT),children:(0,a.jsx)("div",{className:"text-black font-LibreFranklin px-6 py-8 min-h-screen",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-4xl",children:"Dashboard - Fiore Invoice Manager \uD83D\uDCCA"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[d.charAt(0).toUpperCase()+d.slice(1)," • ",N," record",1!==N?"s":""]})]}),(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsxs)("select",{className:"border p-2 rounded-md",value:d,onChange:e=>u(e.target.value),"aria-label":"Select resource to fetch",children:[(0,a.jsx)("option",{value:"clients",children:"Clients"}),(0,a.jsx)("option",{value:"products",children:"Products"}),(0,a.jsx)("option",{value:"receipts",children:"Receipts"})]})})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("label",{className:"text-sm",children:"Filter by:"}),(0,a.jsxs)("select",{className:"border p-2 rounded-md",value:h,onChange:e=>p(e.target.value),"aria-label":"Select field to filter",children:[0===y.length&&(0,a.jsx)("option",{value:"",children:"No fields"}),y.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsx)("input",{type:"text",placeholder:"Type to filter...",className:"border p-2 rounded-md w-64",value:m,onChange:e=>x(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("label",{className:"text-sm",children:"Page size:"}),(0,a.jsxs)("select",{className:"border p-2 rounded-md",value:j,onChange:e=>f(Number(e.target.value)),children:[(0,a.jsx)("option",{value:5,children:"5"}),(0,a.jsx)("option",{value:10,children:"10"}),(0,a.jsx)("option",{value:20,children:"20"}),(0,a.jsx)("option",{value:50,children:"50"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[s&&(0,a.jsx)("div",{className:"p-6 text-center",children:(0,a.jsx)("p",{className:"text-lg",children:"Loading data..."})}),l&&(0,a.jsx)("div",{className:"p-6 text-center text-red-600",children:(0,a.jsxs)("p",{children:["Error: ",l]})}),!s&&!l&&(0,a.jsx)("div",{className:"overflow-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsx)("tr",{children:y.map(e=>(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e},e))})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===C.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:y.length||1,className:"px-6 py-4 text-sm text-gray-500 text-center",children:"No records found."})}):C.map((e,t)=>(0,a.jsx)("tr",{className:"hover:bg-gray-50",children:y.map(s=>{var r;return(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:"object"==typeof e[s]?(0,a.jsx)("pre",{className:"whitespace-pre-wrap max-w-md overflow-auto text-xs",children:JSON.stringify(e[s],null,2)}):String(null!=(r=e[s])?r:"")},"".concat(t,"-").concat(s))})},t))})]})}),!s&&!l&&(0,a.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Page ",g," of ",w," — ",N," record",1!==N?"s":""]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{className:"px-3 py-1 border rounded disabled:opacity-50",disabled:g<=1,onClick:()=>v(e=>Math.max(1,e-1)),children:"Prev"}),(0,a.jsx)("button",{className:"px-3 py-1 border rounded disabled:opacity-50",disabled:g>=w,onClick:()=>v(e=>Math.min(w,e+1)),children:"Next"})]})]})]})]})})})})}},4681:(e,t,s)=>{"use strict";s.d(t,{EV:()=>l,oY:()=>o,r2:()=>c,tj:()=>i});var a=s(3464),r=s(7383);let n="https://fioreinvoicemanager.onrender.com",l="https://fioreinvoicemanager.onrender.com",i="".concat(n,"/api"),c=a.A.create({baseURL:n,headers:{"Content-Type":"application/json"},withCredentials:!0});c.interceptors.request.use(async e=>(e.baseURL="".concat(i),e),e=>Promise.reject(e)),c.interceptors.response.use(e=>e,e=>{var t,s;let r=e.config;return(null==(t=navigator)?void 0:t.onLine)!==!1&&((null==e||null==(s=e.response)?void 0:s.status)!==401||(null==r?void 0:r._retry))?Promise.reject(e):(r._retry=!0,a.A.defaults.headers.common["Content-Type"]="application/json",(0,a.A)(r))});let o=a.A.create({baseURL:"".concat(i),withCredentials:!0,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(async e=>(e.headers["Content-Type"]="application/json",e.baseURL="".concat(i),e),e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{var t,s,n,l;console.log(e);let c=e.config;if(c._retry||(null==(t=navigator)?void 0:t.onLine)===!1)return Promise.reject(e);if(498===(null==e||null==(n=e.response)||null==(s=n.data)?void 0:s.code)){c._retry=!0;try{let e=null==(l=(await a.A.post("".concat(i,"/auth/refresh-token"),{},{withCredentials:!0})).data)?void 0:l.accessToken;if(e)return r.A.set("accessToken",e),o.defaults.headers.common.Authorization="Bearer ".concat(e),c.headers.Authorization="Bearer ".concat(e),o(c)}catch(e){return Promise.reject(e)}}return Promise.reject(e)});let d=a.A.create({baseURL:"".concat(i),withCredentials:!0});d.interceptors.request.use(async e=>{let t=r.A.get("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e.baseURL="".concat(i),e},e=>Promise.reject(e)),d.interceptors.response.use(e=>e,e=>{let t=e.config;return!1!==navigator.onLine&&(401!==e.response.status||t._retry)?Promise.reject(e):(t._retry=!0,a.A.defaults.headers.common["Content-Type"]="application/json",(0,a.A)(t))})},6475:(e,t,s)=>{Promise.resolve().then(s.bind(s,1446))},7132:(e,t,s)=>{"use strict";s.d(t,{jT:()=>a});let a="hidden min-[1024.501px]:block"}},e=>{e.O(0,[122,441,964,358],()=>e(e.s=6475)),_N_E=e.O()}]);